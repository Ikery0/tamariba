import Head from 'next/head'
import Link from 'next/link'
import { client } from '../libs/client'
import Header from '../components/organisms/Header'
import Container from '../components/templates/Container'
import SectionTitle from '../components/atoms/SectionTitle'

export default function Home({ blog }) {
  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header />
      <section className='mt-20 lg:mt-40'>
        <Container size={1024}>
          <SectionTitle text="blog" />
          <ul>
            {blog.map((blog) => (
              <li key={blog.id}>
                <Link href={`/blog/${blog.id}`}>
                  <a>{blog.title}</a>
                </Link>
              </li>
            ))}
          </ul>
        </Container>
      </section>
    </div>
  )
}

export const getStaticProps = async () => {
  const data = await client.get({ endpoint: 'blog' })

  return {
    props: {
      blog: data.contents,
    }
  }
}